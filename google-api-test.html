<!DOCTYPE html>
<html>
<head>
	<script src="https://code.jquery.com/jquery.js"></script>
	<title></title>
</head>
<body>

	<div id="addBookDialogue">
		<input onkeyup="search_books()" name="title" type="text" placeholder="Enter a book title"></input>
		<div id="foundBooks">
		</div> <!-- foundBooks -->
	</div> <!-- addBookDialogue -->

	<!-- <button type="submit" value="submit" id="submit">Submit</button> -->

	<script>
		document.on('ready', function() {
			$(document).on('click', '.item', function() {
				console.log("Selected " + $(this).data('i'));
			});

			function search_books() {
				var term = $("[name='title']").val().trim();
				console.log(term);
				var params = {};
				var url = 'https://www.googleapis.com/books/v1/volumes';
				params['maxResults'] = 10;
				params['q'] = term;
				url += '?' + $.param(params);
				$.getJSON(url, function(data) {
					console.log(data);
					$('#foundBooks').empty();
					for (var i = 0; i < 10; i++) {
						console.log(data.items[i].volumeInfo);
						var pic = $('<img/>').attr('src', data.items[i].volumeInfo.imageLinks.thumbnail);
						var item = $('<div/>')
							.attr('class', "item").attr('cursor', "pointer")
							.data('i', i)
							.append(pic);
						$('#foundBooks').append(item);
					}
				});
			}; // search_books


			// need to delete this... why are you saving this?
				//   // var items = [];			
				//   // $.each(data, function(key, val) {
				//   //   items.push('<li id="' + key + '">' + val + '</li>');
				//   // });
				
				//   // $('<ul/>', {
				//   //   'class': 'my-new-list',
				//   //   html: items.join('')
				//   // }).appendTo('body');
				// });
			// search_books();

		}); // doc.on(ready)
	</script>
</body>
</html>